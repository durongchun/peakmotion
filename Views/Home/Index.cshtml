@model IEnumerable<peakmotion.ViewModels.ProductVM>

    @{
    ViewData["Title"] = "Home Page";
    }

    <link rel="stylesheet" href="~/css/homepage.css">
    <div>
        <img class="homepageheader" src="~/images/homeheader.jpg" alt="homeheaderimage">
        <div class="container">

            <div class="bestseller">
                <h2 class="text-center">GEAR UP. <br> ADVENTRURE AWAITS!</h2>
                <button>SHOP BEST SELLERS</button>
            </div>

            <div class="categories">
                <div >
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index" asp-route-category="Top">
                        <img src="~/images/tops.jpg" alt="">
                        <button>TOPS</button>
                    </a>
                    
                </div>
                <div>
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index" asp-route-category="Bottom">
                        <img src="~/images/bottoms.jpg" alt="">
                        <button>BOTTOMS</button>
                    </a>
                    
                </div>
                <div>
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index"
                        asp-route-category="Accessories">
                        <img src="~/images/accessories.jpg" alt="">
                        <button>ACCESSORIES</button>
                    </a>
                    
                </div>
                <div>
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index" asp-route-category="Equipment">
                        <img src="~/images/equipments.jpg" alt="">
                        <button>EQUIPMENT</button>
                    </a>
                    
                </div>

            </div>

            <div class="bg-dark">
                <p>Mar 14-21</p>
                <div class="d-flex flex-row align-items-center gap-3">
                    <h1 class="discount">25</h1>
                    <div class="d-flex flex-column">
                        <h3>%</h3>
                        <h3>OFF</h3>
                    </div>
                    
                </div>
                
                <h1>EQUIPMENT</h1>
            </div>

            <div class="shopwear">
                <div>
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index" asp-route-category="Men">
                        <img src="~/images/menwear.jpg" alt="">
                        <button>SHOP MENSWEAR</button>
                    </a>
                   
                </div>
                <div>
                    <a class="d-flex flex-column gap-3" asp-area="" asp-controller="Product" asp-action="Index" asp-route-category="Women">
                        <img src="~/images/womenwear.jpg" alt="">
                        <button>SHOP WOMENSWEAR</button>
                    </a>
                    
                </div>
            </div>

            <div>
                <div class="populartitle">
                    <h2 class="peak">POPULAR RIGHT NOW</h2>
                    <div>
                        <img src="~/images/left-arrow.svg" alt="prev">
                        <img src="~/images/right-arrow.svg" alt="next">
                    </div>
                    
                </div>
               
                <div class="popular">
                     @foreach (var featuredItem in Model.Select((item, index) => new { item, index }))
                        {
                            <div class="product-card @(featuredItem.index >= 5 ? "d-none" : "")">
                                <partial name="Product/_ProductCard" for="@featuredItem.item" />
                            </div>
                        }
                </div>
            </div>

            <div class="member">
                <img src="~/images/noun-hiking-1631508.svg" alt="">
            </div>


            <div>
                <h2 class="peak">#PEAKMOTION</h2>
                <div class="peakmotion">
                    <img src="~/images/instagram1.jpg" alt="">
                    <img src="~/images/instagram2.jpg" alt="">
                    <img src="~/images/instagram3.jpg" alt="">
                    <img src="~/images/instagram4.jpg" alt="">
                    <img src="~/images/instagram5.jpg" alt="">
                </div>
            </div>

        </div>


    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let currentIndex = 0;
        const itemsPerPage = 5;
        const productCards = document.querySelectorAll(".product-card");
        const totalItems = productCards.length;

        const prevBtn = document.querySelector('img[alt="prev"]');
        const nextBtn = document.querySelector('img[alt="next"]');

        function updateVisibility() {
            productCards.forEach((product, index) => {
                if (index >= currentIndex && index < currentIndex + itemsPerPage) {
                    product.classList.remove("d-none"); // Show items
                } else {
                    product.classList.add("d-none"); // Hide items
                }
            });

            // Disable prev button if at the beginning
            if (currentIndex === 0) {
                prevBtn.style.opacity = "0.5"; // Grey out
                prevBtn.style.pointerEvents = "none"; // Disable click
            } else {
                prevBtn.style.opacity = "1";
                prevBtn.style.pointerEvents = "auto";
            }

            // Disable next button if at the end
            if (currentIndex + itemsPerPage >= totalItems) {
                nextBtn.style.opacity = "0.5"; // Grey out
                nextBtn.style.pointerEvents = "none"; // Disable click
            } else {
                nextBtn.style.opacity = "1";
                nextBtn.style.pointerEvents = "auto";
            }
        }

        nextBtn.addEventListener("click", function () {
            if (currentIndex + itemsPerPage < totalItems) {
                currentIndex += itemsPerPage;
                updateVisibility();
            }
        });

        prevBtn.addEventListener("click", function () {
            if (currentIndex > 0) {
                currentIndex -= itemsPerPage;
                updateVisibility();
            }
        });

        updateVisibility();
    });
</script>

