@model IEnumerable<peakmotion.ViewModels.CartItemVM>

@if (Model != null && Model.Any())
{
    foreach (var item in Model)
    {
        <div class="cart-item">
            <div class="cart-item-image">
                @if (item.PrimaryImage != null)
                {
                    <img src="~/images/@item.PrimaryImage.Url" alt="Product" />
                }
                else
                {
                    <img src="~/images/placeholder.png" alt="Product" />
                }
            </div>
            <div class="cart-item-info">
                <h4>@item.ProductName</h4>
                <p>Blue Linen/White</p>
                <p>Size: M</p>
                <p>Item Price: @string.Format("{0:C}", item.Price)</p>

                <!-- Quantity update form -->
                <form asp-action="Update" method="post" style="margin-bottom:0.5rem;">
                    <input type="hidden" name="productID" value="@item.ProductID" />
                    <label for="newQty">Quantity:</label>
                    <select id="newQty" name="newQty">
                        @for (int i = 1; i <= Math.Min(item.MaxQuantity, 10); i++)
                        {
                            if (i == item.CartQuantity)
                            {
                                <option value="@i" selected="selected">@i</option>
                            }
                            else
                            {
                                <option value="@i">@i</option>
                            }
                        }
                    </select>
                    <button type="submit">Edit</button>
                </form>

                <p>Total Price: @string.Format("{0:C}", item.Price * item.CartQuantity)</p>

                <div class="cart-item-actions">
                    <a>Edit</a> <!-- Optional additional Edit link -->
                    <a>Save for Later</a>
                    <!-- Remove form -->
                    <form asp-action="Delete" method="post" style="display:inline;">
                        <input type="hidden" name="productID" value="@item.ProductID" />
                        <button type="submit">Remove</button>
                    </form>
                </div>
            </div>
        </div>
    }
}
else
{
    <p>Your cart is empty.</p>
}
